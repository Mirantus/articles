---
title: Шаблоны проектирования
date: 2016-01-06
tags:
  - программирование
  - php
published: 1
---

<h2>Порождающие</h2>

<h3>Фабричный метод</h3>
<p>
Дает возможность подменять используемые внутри класса объекты через метод создания этих объектов и тем самым расширять класс без его изменения через создание дочерних классов, по разному реализующих этот метод, а внешний код ничего не знает про эти объекты и использует только подклассы.
</p>
<p>
Пример: софтверная компания с обучающим центром.
</p>

<h3>Абстрактная фабрика</h3>
<p>
Класс, состоящий из нескольких фабричных методов. Внешний код в зависимости от окружения выбирает нужный дочерний класс, реализующий эти методы и вызывает их, получая сочетающиеся объекты с одинаковым интерфейсом, но не зная какие конкретно.
</p>
<p>
Пример: разные виды мебели в одном стиле.
</p>

<h3>Строитель</h3>
<p>
Позволяет разбить конструктор с большим количеством параметров, вынося конструирование объекта за пределы его класса. Снаружи можно вызывать шаги по разному, создавая разные объекты одним кодом.
</p>
<p>
Пример: конструирование дома по шагам.
</p>
<p>
Вынесение последовательности шагов в отдельный класс называется директором.
</p>

<h3>Прототип</h3>
<p>
Позволяет вызовом метода clone создать полную копию объекта без повторения сложного конструирования объекта, не говоря внешнему коду о классе этого объекта.
</p>
<p>
Пример: деление клеток.
</p>

<h3>Одиночка, Singleton</h3>
<p>
Позволяет с помощью специального метода создать только один экземпляр класса, предоставляя доступ к глобальному общему ресурсу.
</p>
<p>
Пример: президент страны.
</p>

<h2>Структурные</h2>

<h3>Адаптер</h3>
<p>
Обертка над неизменяемым объектом для создания нужного интерфейса, скрывая от внешнего кода процесс преобразования.
</p>
<p>
Пример: электрический переходник.
</p>

<h3>Мост</h3>
<p>
Разделяет класс на абстракцию и несколько реализаций одного функционала, позволяя  менять их независимо и скрывая лишние детали от внешнего кода.
</p>
<p>
Пример: телевизор и пульты.
</p>

<h3>Компоновщик</h3>
<p>
Группирует объекты в дерево и работает как с одним, рекурсивно запуская действие. Внешний код не знает количество объектов.
</p>
<p>
Пример: подсчет цены матрешек.
</p>

<h3>Декоратор</h3>
<p>
С помощью оберток добавляет функционал неизменяемым объектам, сохраняя тот же интерфейс.
</p>
<p>
Например, одежда.
</p>

<h3>Фасад</h3>
<p>
Обертка над сложной системой классов, предоставляющая простой урезанный интерфейс, разделяя систему на слои и скрывая большую часть логики от внешнего кода. 
</p>
<p>
Пример: кнопки в лифте.
</p>

<h3>Легковес, Приспособленец</h3>
<p>
Экономит память, разделяя общее состояние объектов между собой, вместо хранения одинаковых данных в каждом объекте. Применяется в программе, имеющей громадное количество одинаковых объектов.
</p>
<p>
Например, характеристики породы собаки в одном классе, а остальные данные конкретной собаки в другом.
</p>

<h3>Заместитель, Proxy</h3>
<p>
Перехватывает обращения к объекту, позволяя сделать что-тотдо или после. Реализуется классом-дублером с тем же интерфейсом. 
</p>
<p>
Пример: кэширование, логирование или проверка прав.
</p>

<h2>Поведенческие</h2>

<h3>Цепочка обязанностей</h3>
<p>
Разбивает сложную логику класса на классы-шаги, где каждый шаг сам вызывает следующий или прерывает вызовы. Внешний код формирует цепочку и вызывает первый шаг. Можно менять последовательность шагов, не меняя класс.
</p>
<p>
Пример: линии поддержки.
</p>

<h3>Команда</h3>
<p>
Вызов в классе не напрямую методов другого класса, а через объект-команду, передаваемую снаружи. Это позволяет хранить историю команд, передавать и отменять их.
</p>
<p>
Пример: посетитель делает заказ повару через официанта.
</p>

<h3>Итератор</h3>
<p>
Отделяет способ обхода коллекции от самой коллекции, позволяя подменять итераторы не меняя код. Итераторы предоставляются самой коллекцией, но могут использоваться и для обхода других. Детали коллекции скрыты от внешнего кода.
</p>
<p>
Пример: обход достопримечательностей с помощью разных гидов.
</p>

<h3>Посредник, Mediator</h3>
<p>
Уменьшает связанность классов через класс-посредник, упрощая и позволяя переиспользовать основной класс.
</p>
<p>
Пример: пилоты общаются через авиадиспетчеров.
</p>

<h3>Снимок, Memento</h3>
<p>
Позволяет копировать и восстанавливать состояние класса в специальном объекте, который можно прочитать снаружи, но не изменить, сохраняя инкапсуляцию и упрощая сам класс, вынося историю во внешний код или класс-опекун.
</p>
<p>
Пример: команды и операция отмены.
</p>

<h3>Наблюдатель, Observer</h3>
<p>
Позволяет снаружи узнавать об изменении состояния без внесения изменений в класс.
</p>
<p>
Издатель хранит список подписчиков, дает возможность подписываться и отписываться снаружи, оповещает об изменениях.
</p>
<p>
Пример: подписка на журналы.
</p>

<h3>Состояние, State</h3>
<p>
Позволяет избавиться от условных конструкций, меняющих поведение класса.
</p>
<p>
Ограничивает количество состояний класса, создавая отдельный класс для каждого состояния и делегируя ему работу для этого состояния.
</p>
<p>
Пример: поведение кнопок устройства в разных состояниях.
</p>

<h3>Стратегия</h3>
<p>
Позволяет избавиться от условных конструкций, меняющих поведение класса.
</p>
<p>
Позволяет изменять поведение класса, передавая алгоритм-стратегию снаружи.
</p>
<p>
Пример: авторизация разными способами.
</p>

<h3>Шаблонный метод</h3>
<p>
Позволяет убрать дублирование методов в похожих классах, создавая набор шагов и вынося их реализацию в методы, которые можно переопределить дочерними классами
</p>
<p>
Пример: строительство дома - фудамент, стены, крыша.
</p>
  
<h3>Посетитель, Visitor</h3>
<p>
Позволяет производить операцию над объектом, не изменяя его класс, а размещая новое поведение в отдельном классе, который содержит методы для каждого типа объекта, который в него передадут.
</p>
<p>
Внешний код вызывает одинаковый метод у всех объектов, который вызовет метод посетителя для объекта этого типа.
</p>
<p>
Пример: У страхового агента приготовлены полисы для разных видов организаций.
</p>

<h2>Отличия</h2>
<p>
Адаптер предоставляет классу альтернативный интерфейс.<br>
Декоратор предоставляет расширенный интерфейс.<br>
Заместитель предоставляет тот же интерфейс.<br>
Фасад задает новый интерфейс.
</p>
<p>
Мост, Стратегия и Состояние делегируют работу другим классам.
</p>
<p>
Стратегия меняет поведение объекта «изнутри», а Декоратор изменяет его «снаружи».
</p>
<p>
Цепочка обязанностей передаёт запрос последовательно через цепочку потенциальных получателей, ожидая, что какой-то из них обработает запрос.<br>
Команда устанавливает косвенную одностороннюю связь от отправителей к получателям.<br>
Посредник убирает прямую связь между отправителями и получателями, заставляя их общаться опосредованно, через себя.<br>
Наблюдатель передаёт запрос одновременно всем заинтересованным получателям, но позволяет им динамически подписываться или отписываться от таких оповещений.
</p>

<h2>Алгоритм выбора паттерна</h2>

<h3>Расширять класс без его изменения</h3>
<p>
Фабричный метод, Декоратор, Прокси, Шаблонный метод, Посетитель 
</p>

<h3>Интерфейс класса без его изменения</h3>
<p>
Фасад, Адаптер
</p>

<h3>Слишком сложный класс</h3>
<p>
Мост, Стратегия, Состояние, Фабричный метод
</p>

<h3>Слишком большой конструктор</h3>
<p>
Строитель
</p>

<h3>Подменять реализацию класса во время выполнения</h3>
<p>
Мост, Стратегия
</p>

<h3>Работать со сложной структурой</h3>
<p>
Компоновщик, Посетитель, Итератор
</p>

<h3>Создавать единственный объект класса</h3>
<p>
Одиночка
</p>

<h3>Создавать похожие объекты</h3>
<p>
Строитель, Абстрактная фабрика, Прототип
</p>

<h3>Отделять код создания объектов от кода их использования</h3>
<p>
Фабричный метод, Абстрактная фабрика
</p>

<h3>Работать с запросами как с объектами</h3>
<p>
Команда, Наблюдатель
</p>

<h3>Убрать зависимость между вызовом и обработчиком</h3>
<p>
Цепочка обязанностей, Команда, Прокси, Наблюдатель, Посредник 
</p>

<h3>Экономить память</h3>
<p>
Легковес, Прокси
</p>

<h3>Реализовать отмену</h3>
<p>
Команда, Снимок
</p>

<h3>Сохранять</h3>
<p>
Снимок, Прототип
</p>